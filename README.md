# Introduction

## What is this?

This is a Tinder Clone Backend express-based REST API

## Tech Stack

- Typescript
- ExpressJS
- Prisma ORM
- PostgresQL
- Redis

## Brief list of ENV Variables

Variable          | Description                                                       | Example Value
----------------- | ----------------------------------------------------------------- | -------------
`DATABASE_URL`    | PostgresQL url connection string                                  |
`PORT`            | Port to app listen to                                             | `3000`
`CORS_DOMAIN`     | Domain that will be use to bypass the cors (only 1 at the moment) | `localhost`
`ENCRYPT_SALT`    | Random 128 char string which is inserted manually                 |
`ENCRYPT_SECRET`  | Secret key for encryption                                         | `secretKey`
`COOKIE_DOMAIN`   | Domain to set cookie                                              | `domain.com`
`COOKIE_DURATION` | Duration for the cookie expiration in hour                        | `24`
`REDIS_URL`       | Redis connection url string (optional)                            |
`REDIS_HOST`      | Redis host (optional if url is provided)                          | `localhost`
`REDIS_USERNAME`  | Redis username (optional if url is provided)                      | `default`
`REDIS_PASSWORD`  | Redis password (optional if url is provided)                      | `password`
`REDIS_PORT`      | Redis port (optional if url is provided)                          | `6379`

## Brief list of Directory Structure

```bash
├───specs                          
├───prisma                          
│   ├───migrations                  # Store sql migration script generated by `prisma migrate dev --create-only` command
│   ├───schema                      # Schema for models .prisma file
│   └───seeders                     # Database seeder script that will be run by `prisma seed` command
├───src
│   ├───api                         # API-related files/folders
│   │   ├───controllers             # API controller
│   │   ├───middlewares             # API middlewares
│   │   ├───modules                 # API Module that will be populated in res.locals.modules
│   │   └───routes                  # API routes
│   ├───engine
│   │   ├───db                      # DB config/initialization
│   │   └───environment             # Environment variable initialization
│   ├───loaders                     # Loaders for populate api middlewares, modules, and routes
│   ├───models
│   │   ├───enums                   # Enum types
│   │   ├───interfaces              # Interfaces / types (.ts file)
│   │   └───schemas                 # Schema models (joi, etc)
│   ├───plugins                     # Extending node packages
│   ├───services                    # Feature logic service
│   └───utils                       # Any reusable utilities logic
└───types                           # For any .d.ts file
```

## How to run?

### Project Setup

- Install Node.js and npm (recommended using node v.20)
- Install pnpm

  ```sh
  npm i -g pnpm
  ```

- Install node modules

  ```sh
  pnpm install
  ```

- Install nodemon (optional). This project is not shipped nodemon by default

  ```sh
  npm i -g nodemon
  ```

- Set appropriate value for .env

- Migrate database tables

  ```sh
  pnpm run prisma-migrate-deploy
  ```

- Seed data

  ```sh
  pnpm run prisma-seed
  ```

- Run project

  ```sh
  pnpm run start
  ```

### Run unit test (jest)

```sh
pnpm run test
```

### Compile and Hot-Reload for Development

```sh
pnpm run dev
```

### Compile and Minify for Production

```sh
pnpm run build
```

### Added Bonus

- Deployments. Added Dockerfile

  ```sh
  docker build .
  ```

- ESlint

  ```sh
  pnpm run lint
  ```
